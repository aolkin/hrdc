{% extends "publicity/base.html" %}

{% block title %}{{ object }} | Show Information{% endblock %}

{% load bt config %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <h3 class="text-center">Show Information Browser</h3>
    <h2 class="text-center">{{ object }}</h2>
  </div>
</div>

<h3 class="text-center mt-4 mb-2">Show Metadata</h3>
<div class="row justify-content-center">
  <div class="col-6 text-right"><em>Author/Creator:</em></div>
  <div class="col-6">
    {{ object.show.creator_credit|default:"<em>N/A</em>" }}
  </div>
  <div class="col-6 text-right"><em>Affiliation:</em></div>
  <div class="col-6">
    {{ object.show.affiliation|default:"<em>N/A</em>" }}
  </div>
  <div class="col-6 text-right"><em>Production Type:</em></div>
  <div class="col-6">
    {{ object.show.get_prod_type_display }}
  </div>
  <div class="col-6 text-right"><em>Venue:</em></div>
  <div class="col-6">
    {{ object.show.space|default:"(none)" }}
  </div>
  <div class="col-6 text-right"><em>Residency:</em></div>
  <div class="col-6">
    {% if object.show.residency_starts %}
    {{ object.show.residency_starts|date:"M j" }} -
    {{ object.show.residency_ends|date:"M j, Y" }}
    {% else %}(none)
    {% endif %}
  </div>
  <div class="col-6 text-right"><em>Liaison(s):</em></div>
  <div class="col-6">
    {{ object.show.liaison_str|default:"(none)" }}
  </div>
</div>

<h3 class="text-center mt-4 mb-2">Performances</h3>
<div class="row justify-content-center">
  <div class="col-md-8 col-lg-6">
    <ol class="list-group">
      {% for date in object.performancedate_set.all %}
      <li class="list-group-item">
	{{ date.performance|date:"M j @ g:i A" }}
	{% if date.note %}
	({{ date.note }})
	{% endif %}
      </li>
      {% empty %}
      <li class="list-group-item text-center text-muted">
	(No performance dates have been listed yet.)
      </li>
      {% endfor %}
    </ol>
  </div>
</div>

<h3 class="text-center mt-4 mb-2">Publicity Information</h3>
<div class="row justify-content-center">
  <div class="col-sm-3 text-right"><em>Billing:</em></div>
  <div class="col-sm-9">
    {{ object.credits|default:"(not supplied)"|linebreaksbr }}
  </div>
  <div class="col-sm-3 text-right"><em>Show Email:</em></div>
  <div class="col-sm-9">
    <a {% if object.contact_email %}href="mailto:{{ object.contact_email }}"{% endif %}>
      {{ object.contact_email|default:"(not supplied)" }}
    </a>
  </div>
  <div class="col-sm-3 text-right"><em>Runtime:</em></div>
  <div class="col-sm-9">
    {{ object.runtime|default:"(not supplied)" }}
  </div>
  <div class="col-sm-3 text-right"><em>Blurb:</em></div>
  <div class="col-sm-9">
    {{ object.blurb|default:"(not supplied)"|urlize|linebreaksbr }}
  </div>
  <div class="col-sm-3 text-right"><em>Ticket Link:</em></div>
  <div class="col-sm-9">
    <a {% if object.ticket_link %}href="{{ object.ticket_link }}"{% endif %}>
      {{ object.ticket_link|default:"(not supplied)" }}
    </a>
  </div>
  <div class="col-sm-3 text-right"><em>Webpage:</em></div>
  <div class="col-sm-9">
    <a {% if object.website_page %}href="{{ object.website_page }}"{% endif %}>
      {{ object.website_page|default:"(not set)" }}
    </a>
  </div>
</div>

<h3 class="text-center mt-4 mb-2">Staff Contact Sheet</h3>
<table class="table">
  <thead>
    <tr>
      <th>Position</th>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
    </tr>
  </thead>
  <tbody>
    {% for staff in object.staff %}
    <tr>
      <td>{{ staff.position }}</td>
      <td>{{ staff.person }}</td>
      <td><a href="mailto:{{ staff.person.email }}">
	{{ staff.person.email }}</a></td>
      <td><a href="tel:{{ staff.person.phone }}">
	{{ staff.person.phone }}</a></td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center"><em>
	(No staff members have been listed yet.)
      </em></td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h3 class="text-center mt-4 mb-2">Cast Contact Sheet</h3>
<table class="table">
  <thead>
    <tr>
      <th>Role</th>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
    </tr>
  </thead>
  <tbody>
    {% for staff in object.cast %}
    <tr>
      <td>{{ staff.position }}</td>
      <td>{{ staff.person }}</td>
      <td><a href="mailto:{{ staff.person.email }}">
	{{ staff.person.email }}</a></td>
      <td><a href="tel:{{ staff.person.phone }}">
	{{ staff.person.phone }}</a></td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center"><em>
	(No cast members have been listed yet.)
      </em></td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if object.band_term %}
<h3 class="text-center mt-4 mb-2">
  {{ object.get_band_term_display }} Contact Sheet
</h3>
<table class="table">
  <thead>
    <tr>
      <th>Role</th>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
    </tr>
  </thead>
  <tbody>
    {% for staff in object.band %}
    <tr>
      <td>{{ staff.position }}</td>
      <td>{{ staff.person }}</td>
      <td><a href="mailto:{{ staff.person.email }}">
	{{ staff.person.email }}</a></td>
      <td><a href="tel:{{ staff.person.phone }}">
	{{ staff.person.phone }}</a></td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center"><em>
	(No {{ object.get_band_term_display|lower }} members have been
	listed yet.)
      </em></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}

{% endblock %}
